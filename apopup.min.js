!function(){"use strict";$.fn.apopup=function(o,n){function t(o,n){$.isFunction(o)&&o.call(h,n)}function i(){t(k.onOpen),x=1,d=h.outerHeight(!0),m=h.outerWidth(!0),p()}function e(){l="auto"!==k.position[1]?k.position[1]:Math.max(0,(y.height()-h.outerHeight(!0))/2-k.amsl),f="auto"!==k.position[0]?k.position[0]:(y.width()-h.outerWidth(!0))/2,console.info(l,f)}function p(){k.mask&&!$(".apopup-mask").length&&$('<div class="apopup-mask"></div>').css({backgroundColor:k.maskColor,position:"fixed",top:0,right:0,bottom:0,left:0,opacity:0,zIndex:k.zIndex+x,opacity:k.opacity}).appendTo(k.appendTo),e(),h.css({left:f,top:l,position:k.positionStyle,"z-index":k.zIndex+x+1,display:"block",opacity:1}).each(function(){k.appending&&$(this).appendTo(k.appendTo)}),a(),t(n),t(k.onComplete),k.autoClose&&(r=setTimeout(s,k.autoClose))}function s(){return c(),k.mask&&$(".apopup-mask").remove(),clearTimeout(r),h.hide(),t(k.onClose),!1}function a(){$("."+k.closeClass).on("click",s),k.maskClose&&$(".apopup-mask").css("cursor","pointer").on("click",s),k.escClose&&C.on("keydown.apopup",function(o){27==o.which&&s()})}function c(){$(".apopup-mask").off("click"),C.off("keydown.apopup"),$("."+k.closeClass).off("click",s).data("apopup",null)}function u(o){e(),h.each(function(){$(this).css({left:f,top:l})})}$.isFunction(o)&&(n=o,o=null);var l,f,d,m,r,k=$.extend({},$.fn.apopup.defaults,o),h=this,C=$(document),y=$(window),x=0;return h.close=function(){s()},h.reposition=function(o){u(o)},h.each(function(){i()})},$.fn.apopup.defaults={amsl:50,appending:!0,appendTo:"body",animate:!1,speed:250,autoClose:!1,closeClass:"p-close",escClose:!0,mask:!0,maskClose:!0,maskColor:"#000",opacity:.7,position:["auto","auto"],positionStyle:"fixed",transition:"fadeIn",zIndex:9997,onClose:!1,onOpen:!1,onComplete:!1}}();